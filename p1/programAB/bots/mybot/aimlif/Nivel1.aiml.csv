0,FUNCIONCITA * <SET>TURNOS_POSIBLES</SET>,*,*,<think>#Newline  <!-- Pasa a una lista una fecha concreta con formato 10-12-20 -->#Newline  <set name="FECHA"><star index="1"/></set>#Newline  <set var="horas"><srai> LIST OF DAY <get name="FECHA"/></srai></set>#Newline#Newline  Rango de horas preguntado#Comma es decir si manana tarde o dia#Newline  <set name="turno"><star index="2"/></set>#Newline#Newline  Estas son las horas de trabajo:#Newline#Newline  <set var="horaTrabajo">#Newline    <srai> SUBLIST FROM <map name="horas">inicio_<get name="turno"/></map> TO <map name="horas">fin_<get name="turno"/></map> OF <get var="horas"/> </srai>#Newline  </set>#Newline#Newline  <set var="pos">#Newline    <srai>FINDITEM null IN  <get var="horaTrabajo"/></srai>#Newline  </set>#Newline#Newline  </think>#Newline#Newline  <condition var="pos">#Newline    <li value="0"> Pues esta todo acupado#Comma lo siento. ¿Desea otro dia? #Newline    <think>#Newline      <set name="topic">SEGUNDO_ESTADO</set>#Newline      <!-- <set name="HAY_HORAS">false</set> -->#Newline    </think>#Newline    </li>#Newline    <li>  Parece que hay hueco para ese dia a las <srai>INDICE null EN <get var="horaTrabajo"/></srai>#Newline    <think>#Newline      indicamos que se espera que se diga algo sobre las horas mencionamos#Newline      <set name="topic">SEGUNDO_ESTADO</set>#Newline      <!-- <set name="HAY_HORAS">true</set> -->#Newline    </think>#Newline    </li>#Newline  </condition>,Nivel1.aiml
0,INDICE * EN *,*,*,<think>#Newline      valor de la lista:#Newline#Newline      <!-- Lista sobre la que va a buscar las incidencias -->#Newline      <set var="lista"><star index="2"/></set>#Newline      #Newline      #Newline      <!-- Lista con las horas respetando el turno #Newline	   <map name="horas"><get name="turno"/></map>#Newline      <set var="listaHoras">#Newline	<map name="horas"><get name="turno"/></map>#Newline      </set>#Newline      -->#Newline      <condition name="turno">#Newline	<li value="dia"> <set var="listaHoras">08:00 09:00 10:00 11:00 12:00 13:00 14:00 15:00 16:00 17:00 18:00 19:00 20:00</set> </li>#Newline	<li value="manana"> <set var="listaHoras">08:00 09:00 10:00 11:00 12:00</set> </li>#Newline	<li><set var="listaHoras">13:00 14:00 15:00 16:00 17:00 18:00 19:00 20:00</set> </li>#Newline      </condition>#Newline    #Newline    <set var="numeroIncidencias">1</set>#Newline    Guardamos el caso inicial en un indice#Comma sabemos que existe#Comma su valor es:#Newline    <set var="pos"> #Newline	  <srai>FINDITEM <star index="1"/> IN <get var="lista"/></srai>#Newline    </set>#Newline    #Newline    <set var="salida">#Newline      <srai>SELECTITEM <get var="pos"/> IN <get var="listaHoras"/></srai>#Newline    </set>#Newline    Eliminamos el caso anterior de la lista y su hora asociada#Newline    <set var="lista">#Newline      <srai> SUBLIST FROM <map name="successor"><get var="pos"/></map> TO 24 OF <get var="lista"/></srai>#Newline    </set>#Newline    <set var="listaHoras">#Newline      <srai> SUBLIST FROM <map name="successor"><get var="pos"/></map> TO 24 OF <get var="listaHoras"/></srai>#Newline    </set>#Newline    <set var="pos">#Newline      <srai>FINDITEM <star index="1"/> IN  <get var="lista"/></srai>#Newline    </set>#Newline#Newline    </think>  #Newline#Newline  <condition var="pos">#Newline    <li value="0"> <!-- No se ha encontrado ninguna otra disponible así que se entrega -->#Newline      <set name="HORAS_DISPONBLES"><get var="salida"/></set></li>#Newline    <li>#Newline      <think>#Newline      Quedan indices por buscar#Newline      Anadimos el nuevo a la lista#Newline      <set var="nuevaHora">#Newline	<srai>SELECTITEM <get var="pos"/> IN <get var="listaHoras"/></srai>#Newline      </set>#Newline      <set var="salida"><get var="salida"/> <get var="nuevaHora"/></set>#Newline     <!-- si se utiliza esta funciín las pone del reves#Newline      <set var="salida">#Newline	<srai>#Newline	   ADDITEM <get var="nuevaHora"/> IN <get var="salida"/> #Newline	</srai>#Newline      </set>#Newline      -->#Newline      Eliminamos el caso anterior de la lista y su hora asociada#Newline      <set var="lista">#Newline	<srai> SUBLIST FROM <map name="successor"><get var="pos"/></map> TO 12 OF <get var="lista"/></srai>#Newline      </set>#Newline      <set var="listaHoras">#Newline	<srai> SUBLIST FROM <map name="successor"><get var="pos"/></map> TO 12 OF <get var="listaHoras"/></srai>#Newline      </set>#Newline      <set var="pos">#Newline	<srai>FINDITEM <star index="1"/> IN  <get var="lista"/></srai>#Newline      </set>#Newline      <set var="numeroIncidencias">#Newline	<map name="successor"><get var="numeroIncidencias"/></map>#Newline      </set>#Newline      </think>#Newline      <loop/>#Newline    </li>#Newline  </condition>,Nivel1.aiml
0,HORA <SET>HORA_SIMPLE2</SET>,*,RESPUESTA_HORAS,vamos a comprobar si la hora está #Newline      <think>#Newline      Comprobamos si la hora <star/>  esta definida en nuetra lista#Newline#Newline      <set var="pos"> #Newline	  <srai>FINDITEM <star/> IN <get name="HORAS_DISPONBLES"/></srai>#Newline      </set>#Newline#Newline      #Newline      </think>#Newline      #Newline      <condition var="pos">#Newline	<li value="0">Lo siento#Comma esa hora <star/> no esta libre#Comma las disponibles son <get name="HORAS_DISPONBLES"/></li>#Newline	<li>#Newline	  Muy bien#Comma ya le he reservado a las <star/>.#Newline	 <think>#Newline	  <srai>MARK OCUPADO AT <star/> ON <get name="FECHA"/></srai>#Newline	  #Newline	  <set name="topic">null</set>#Newline	 </think> #Newline	</li>#Newline      </condition>,Nivel1.aiml
0,QUIERO QUE ME COJAS ESTA HORA <SET>HORA_SIMPLE2</SET>,*,*,vamos a comprobar si la hora está #Newline      <think>#Newline      Comprobamos si la hora <star/>  esta definida en nuetra lista#Newline#Newline      <set var="pos"> #Newline	  <srai>FINDITEM <star/> IN <get name="HORAS_DISPONBLES"/></srai>#Newline      </set>#Newline#Newline      #Newline      </think>#Newline      #Newline      <condition var="pos">#Newline	<li value="0">Lo siento#Comma esa hora <star/> no esta libre#Comma las disponibles son <get name="HORAS_DISPONBLES"/></li>#Newline	<li>#Newline	  Muy bien#Comma ya le he reservado a las <star/>.#Newline	 <think>#Newline	  <srai>MARK OCUPADO AT <star/> ON <get name="FECHA"/></srai>#Newline	  #Newline	  <set name="topic">null</set>#Newline	 </think> #Newline	</li>#Newline      </condition>,Nivel1.aiml
0,^ CITA+ ^,*,*,<think>#Newline	#Newline      <set var="FECHA">#Newline	<srai>SACA FECHA <star index="2"/> </srai>#Newline	<srai>SACA FECHA <star index="1"/> </srai>#Newline      </set>#Newline#Newline      <set var="TURNO">#Newline	<srai> SACA TURNO #Newline	  <srai>SACA TURNO AUX <star index="2"/> </srai>#Newline	  <srai>SACA TURNO AUX <star index="1"/> </srai>#Newline	</srai>#Newline      </set>#Newline#Newline      <set var="HORA">#Newline	<srai>SACA HORA#Newline	  <srai>SACA HORA AUX <star index="1"/> </srai>#Newline	  <srai>SACA HORA AUX <star index="2"/> </srai>#Newline	</srai>#Newline      </set>#Newline      </think>#Newline      #Newline      Los parametros seleccionados fuero: #Newline      La hora : <get var="HORA"/>#Newline      La fecha : <get var="FECHA"/>#Newline      Turno:  <get var="TURNO"/>#Newline    #Newline    <condition var="HORA">#Newline      <li value="NULL">#Newline        <srai>FUNCIONCITA <get var="FECHA"/> <get var="TURNO"/></srai>#Newline      </li>#Newline      <li>#Newline	<srai>FUNCIONCITA <get var="FECHA"/> <get var="TURNO"/></srai>#Newline	<srai>QUIERO QUE ME COJAS ESTA HORA <get var="HORA"/></srai>#Newline      </li>#Newline    </condition>,Nivel1.aiml
0,SACA FECHA ^,*,*,<template/>,Nivel1.aiml
0,SACA FECHA ^ <SET>DIAS_VALIDOS_MES</SET> <SET>MESES_NUMERO</SET> ^,*,*,<think>#Newline	<set name="MES"><star index="3"/></set>#Newline      </think>#Newline      <star index="2"/>-<star index="3"/>-20,Nivel1.aiml
0,SACA FECHA ^ <SET>DIAS_SIN_CERO_DELANTE</SET> <SET>MESES_NUMERO</SET> ^,*,*,<think>#Newline	<set name="MES"><star index="3"/></set>#Newline      </think>#Newline      0<star index="2"/>-<star index="3"/>-20,Nivel1.aiml
0,SACA FECHA ^ <SET>DIAS_VALIDOS_MES</SET> ^ <SET>MONTH_ES</SET> ^,*,*,<think>#Newline	<set name="MES"><map name="month_index_ES"><star index="4"/></map></set>#Newline      </think>#Newline      <star index="2"/>-<get name="MES"/>-20,Nivel1.aiml
0,SACA FECHA ^ <SET>DIAS_SIN_CERO_DELANTE</SET> ^ <SET>MONTH_ES</SET> ^,*,*,<think>#Newline	<set name="MES"><map name="month_index_ES"><star index="4"/></map></set>#Newline      </think>#Newline      0<star index="2"/>-<get name="MES"/>-20,Nivel1.aiml
0,SACA TURNO AUX ^,*,*,<template/>,Nivel1.aiml
0,SACA TURNO AUX ^ [POR DE] ^ <SET>TURNOS_POSIBLES</SET> ^,*,*,<star index="3"/>,Nivel1.aiml
0,SACA TURNO ^,*,*,dia,Nivel1.aiml
0,SACA TURNO ^ <SET>TURNOS_POSIBLES</SET> ^,*,*,<star index="2"/>,Nivel1.aiml
0,^ <SET>HORA_SIMPLE</SET> ^,*,SEGUNDO_ESTADO,<srai>QUIERO QUE ME COJAS ESTA HORA <star index="2"/>:00</srai>,Nivel1.aiml
0,^ <SET>HORA_SIMPLE2</SET> ^,*,SEGUNDO_ESTADO,<srai>QUIERO QUE ME COJAS ESTA HORA <star index="2"/></srai>,Nivel1.aiml
0,^ <SET>INDIFERENCIA</SET> ^,*,SEGUNDO_ESTADO,<srai>QUIERO QUE ME COJAS ESTA HORA <srai>TOP <get name="HORAS_DISPONBLES"/></srai></srai>,Nivel1.aiml
0,^ NO ^,*,SEGUNDO_ESTADO,Disculpe por no haber podido ofrecerle lo que deseaba. #Newline	  <think><srai> <set name="topic">null</set></srai></think>,Nivel1.aiml
0,SI ^,*,SEGUNDO_ESTADO,<srai> CITA <star/></srai>,Nivel1.aiml
0,SI,*,SEGUNDO_ESTADO,aja#Comma pues estaria muy bien que me la dijeras,Nivel1.aiml
0,^ [OTRO DIA Y EL PARA] ^,*,SEGUNDO_ESTADO,<srai> <star index="1"/> CITA <star index="2"/> </srai>,Nivel1.aiml
0,^,*,SEGUNDO_ESTADO,Perdone#Comma soy un poquitillo torpe y me ha pillado desprevenido#Comma me lo podria volver a explicar otra vez y si podria ser mas claro :),Nivel1.aiml
0,^,*,*,Perdone#Comma soy un poquitillo torpe y me ha pillado desprevenido#Comma me lo podria volver a explicar otra vez,Nivel1.aiml
