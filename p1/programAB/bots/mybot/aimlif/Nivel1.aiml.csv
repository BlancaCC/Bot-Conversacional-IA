0,^ CITA ^ <SET>DIAS_VALIDOS_MES</SET> ^ <SET>MONTH_ES</SET>,*,*,<think><var name="MES_PREGUNTADO"><star index="5"/></var></think>#Newline  <srai> cita <star index="3"/>-<map name="month_index_ES"><star index="5"/></map>-20 dia </srai>,Nivel1.aiml
0,^ CITA ^ <SET>DIAS_SIN_CERO_DELANTE</SET> ^ <SET>MONTH_ES</SET>,*,*,<think><var name="MES_PREGUNTADO"><star index="5"/></var></think>#Newline  <srai> cita 0<star index="3"/>-<map name="month_index_ES"><star index="5"/></map>-20 dia </srai>,Nivel1.aiml
0,^ <SET>DIAS_SIN_CERO_DELANTE</SET> ^,*,OTRO_DIA,<think><var name="MES_PREGUNTADO"><star index="5"/></var></think>#Newline  <srai> cita 0<star index="3"/>-<map name="month_index_ES"><get name="MES_PREGUNTADO"/></map>-20 dia </srai>,Nivel1.aiml
0,CITA * <SET>TURNOS_POSIBLES</SET>,*,*,<think>#Newline  <!-- Pasa a una lista una fecha concreta con formato 10-12-20 -->#Newline  <set name="FECHA"><star index="1"/></set>#Newline  <set var="horas"><srai> LIST OF DAY <get name="FECHA"/></srai></set>#Newline#Newline  Rango de horas preguntado#Comma es decir si manana tarde o indiferente#Newline  <set name="turno"><star index="2"/></set>#Newline#Newline  Estas son las horas de trabajo:#Newline#Newline  <set var="horaTrabajo">#Newline    <srai> SUBLIST FROM <map name="horas">inicio_<get name="turno"/></map> TO <map name="horas">fin_<get name="turno"/></map> OF <get var="horas"/> </srai>#Newline  </set>#Newline#Newline  <set var="pos">#Newline    <srai>FINDITEM null IN  <get var="horaTrabajo"/></srai>#Newline  </set>#Newline#Newline  </think>#Newline#Newline  <condition var="pos">#Newline    <li value="0"> Pues esta todo acupado#Comma lo siento. ¿Desea otro dia?#Newline    <think>#Newline      <set name="topic">OTRO_DIA</set>#Newline    </think>#Newline    </li>#Newline    <li>  Parece que hay hueco para ese dia a las <srai>INDICE null EN <get var="horaTrabajo"/></srai>#Newline    <think>#Newline      indicamos que se espera que se diga algo sobre las horas mencionamos#Newline      <set name="topic">RESPUESTA_HORAS</set>#Newline    </think>#Newline    </li>#Newline  </condition>,Nivel1.aiml
0,INDICE * EN *,*,*,<think>#Newline    valor de la lista: #Newline    <set var="lista"><star index="2"/></set>#Newline    <map name="horas"><get name="turno"/></map>#Newline    <set var="listaHoras">#Newline      <map name="horas"><get name="turno"/></map>#Newline    </set>#Newline    #Newline    <set var="numeroIncidencias">1</set>#Newline    Guardamos el caso inicial en un indice#Comma sabemos que existe#Comma su valor es:#Newline    <set var="pos"> #Newline	  <srai>FINDITEM <star index="1"/> IN <get var="lista"/></srai>#Newline    </set>#Newline    #Newline    <set var="salida">#Newline      <srai>SELECTITEM <get var="pos"/> IN <get var="listaHoras"/></srai>#Newline    </set>#Newline    Eliminamos el caso anterior de la lista y su hora asociada#Newline    <set var="lista">#Newline      <srai> SUBLIST FROM <map name="successor"><get var="pos"/></map> TO 24 OF <get var="lista"/></srai>#Newline    </set>#Newline    <set var="listaHoras">#Newline      <srai> SUBLIST FROM <map name="successor"><get var="pos"/></map> TO 24 OF <get var="listaHoras"/></srai>#Newline    </set>#Newline    <set var="pos">#Newline      <srai>FINDITEM <star index="1"/> IN  <get var="lista"/></srai>#Newline    </set>#Newline#Newline    </think>  #Newline#Newline  <condition var="pos">#Newline    <li value="0"> <!-- No se ha encontrado ninguna otra disponible así que se entrega -->#Newline      <set name="HORAS_DISPONBLES"><get var="salida"/></set></li>#Newline    <li>#Newline      <think>#Newline      Quedan indices por buscar#Newline      Anadimos el nuevo a la lista#Newline      <set var="nuevaHora">#Newline	<srai>SELECTITEM <get var="pos"/> IN <get var="listaHoras"/></srai>#Newline      </set>#Newline     #Newline      <set var="salida">#Newline	<srai>#Newline	  ADDITEM <get var="nuevaHora"/> IN <get var="salida"/>#Newline	</srai>#Newline      </set>#Newline      Eliminamos el caso anterior de la lista y su hora asociada#Newline      <set var="lista">#Newline	<srai> SUBLIST FROM <map name="successor"><get var="pos"/></map> TO 12 OF <get var="lista"/></srai>#Newline      </set>#Newline      <set var="listaHoras">#Newline	<srai> SUBLIST FROM <map name="successor"><get var="pos"/></map> TO 12 OF <get var="listaHoras"/></srai>#Newline      </set>#Newline      <set var="pos">#Newline	<srai>FINDITEM <star index="1"/> IN  <get var="lista"/></srai>#Newline      </set>#Newline      <set var="numeroIncidencias">#Newline	<map name="successor"><get var="numeroIncidencias"/></map>#Newline      </set>#Newline      </think>#Newline      <loop/>#Newline    </li>#Newline  </condition>,Nivel1.aiml
0,HORA <SET>HORA_SIMPLE</SET>,*,RESPUESTA_HORAS,<think>#Newline      Comprobamos si esa hora esta definida en nuetra lista#Newline#Newline      <set var="pos"> #Newline	  <srai>FINDITEM <star/> IN <get name="HORAS_DISPONBLES"/></srai>#Newline      </set>#Newline      </think>#Newline      #Newline      <condition var="pos">#Newline	<li value="0">Lo siento#Comma esa hora <star/> no esta libre#Comma las disponibles son <get name="HORAS_DISPONBLES"/></li>#Newline	<li>#Newline	  Muy bien#Comma procedo a reservarle la hora#Newline	 <think>#Newline	  <srai>MARK OCUPADO AT <star/>:00 ON <get name="FECHA"/></srai>#Newline	  #Newline	  <set name="topic">null</set>#Newline	 </think> #Newline	</li>#Newline      </condition>,Nivel1.aiml
